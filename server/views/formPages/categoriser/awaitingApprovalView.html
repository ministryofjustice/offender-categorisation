{% extends "../formTemplate.html" %}
{% from "summary-list/macro.njk" import govukSummaryList %}

{% set pageTitle = "Provisional categorisation" %}

{% set greenButtonText = "Continue" %}

{% block content %}

<div class="govuk-grid-row govuk-body-s">
  <div>

    <h1 class="govuk-heading-l mainHeading">Provisional categorisation</h1>

    {% set cat = data.categoriser.provisionalCategory.suggestedCategory %}
    {% set overriddenCat = data.categoriser.provisionalCategory.overriddenCategory %}
    {% set currentCat = overriddenCat if overriddenCat else cat %}

    <div id="category-div" class="govuk-warning-text forms-info-text warning-overrides">
      {% if currentCat === 'D' or currentCat === 'I' or currentCat === 'J' or currentCat === 'R' or currentCat === 'T' %}
        <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
      {% else %}
        <span class="govuk-warning-text__icon" aria-hidden="true">{{ currentCat }}</span>
      {% endif %}
        <strong class="govuk-warning-text__text">
          <span class="govuk-warning-text__assistive">Warning</span>
          <!-- womens must be a word -->
          <!-- mens must be a letter unless YOI Open/YOI Closed -->
          Category for approval is {{ catHistoryMappings(currentCat, user.activeCaseLoad.female) }}
        </strong>
    </div>

    {% set showChangeLinks = false %}
    {% include "../../partials/reviewContents.html" %}

    {% if (currentCat == "D" or currentCat == "J" or data.openConditions) %}

      <h1 class="govuk-heading-l openConditionsHeader">Open Conditions</h1>
      {% set showOpenConditionChangeLinks = false %}
      {% include "../../partials/reviewContentsOpenConditions.html" %}

    {% endif %}

    <h2 class="govuk-heading-m">Other information</h2>
    {{ govukSummaryList({
      classes: 'govuk-!-margin-bottom-9 otherInformationSummary',
      rows: [
      {
      key: { text: "Other relevant information" },
      value: { text: data.categoriser.provisionalCategory.otherInformationText if data.categoriser.provisionalCategory.otherInformationText else 'None' },
      actions: { items: [] }
      }
      ]
    }) }}
    <a class="govuk-!-font-size-19" href="/form/cancel/{{ data.details.bookingId }}" id="cancelLink">Cancel this categorisation</a>
  </div>
</div>

{% endblock %}
