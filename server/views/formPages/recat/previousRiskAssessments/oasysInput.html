{% extends "../../formTemplate.html" %}
{% from "radios/macro.njk" import govukRadios %}
{% from "textarea/macro.njk" import govukTextarea %}
{% from "details/macro.njk" import govukDetails %}
{% from "input/macro.njk" import govukInput %}

{% set pageTitle = "Check their OASys assessment" %}

{% block navigation %}

{% include "../../../partials/breadcrumbPreviousRiskAssessments.html" %}

{% endblock %}

{% block formItems %}

<h1 id="securityInputHeader" class="govuk-heading-l">{{ pageTitle }}</h1>

<p>Prisoners serving a sentence of 10 months or more must have an up-to-date OASys. If there is not a recent, full assessment you will need to create one.</p>
<p>Refer to Offender Management in Custody (OMIC) guidelines for more information.</p>

{% set oasysInputTextHtml %}

    {{ govukTextarea({
        name: "oasysInputText",
        type: "oasysInputText",
        id: "oasysInputText",
        label: { text: "Enter any relevant information" },
        hint: { text: "Include any measures taken to mitigate the risk." },    
        value: data.recat.oasysInput.oasysInputText,
        errorMessage: {
            text: (errors | findError('oasysInputText')).text
                } if (errors | findError('oasysInputText'))
        })
    }}

{% endset -%}

    {{ govukRadios({
        name: "oasysRelevantInfo",
        fieldset: {
            legend: {
            html: '<h2 class="govuk-heading-m">Was there any information in their OASys that is relevant to the recategorisation?</h2>'
            }
    },
    errorMessage: {
        text: (errors | findError('oasysRelevantInfo')).text
    } if (errors | findError('oasysRelevantInfo')),
    items: [
        {
        value: "Yes",
        text: "Yes",
        checked: data.recat.oasysInput.oasysRelevantInfo === 'Yes',
        conditional: {
            html: oasysInputTextHtml
        }
        },
        {
        value: "No",
        checked: data.recat.oasysInput.oasysRelevantInfo === 'No',
        text: "No"
        }
    ]
    }) }}

{% endblock %}
