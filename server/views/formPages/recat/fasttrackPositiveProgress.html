{% extends "../formTemplate.html" %}
{% from "radios/macro.njk" import govukRadios %}
{% from "warning-text/macro.njk" import govukWarningText %}
{% from "character-count/macro.njk" import govukCharacterCount %}
{% from "details/macro.njk" import govukDetails %}

{% block formItems %}

<h1 id="fasttrackPositiveProgressHeader" class="govuk-heading-l">Are they making any positive progress?</h1>

<p>Recording positive progress can help a prisoner trust the category review process. This information may be used for future open conditions assessments.</p>

{% set detailTextHtml %}

  {{ govukCharacterCount({
    name: "positiveProgressText",
    type: "positiveProgressText",
    id: "positiveProgressText",
    maxlength: 50000,
    threshold: 50,
    label: {
      text: "Enter details of this"
    },
    value: data.recat.fasttrackPositiveProgress.positiveProgressText,
    errorMessage: {
      text: "Please enter details"
    } if (errors | findError('positiveProgressText'))
  }) }}

{% endset -%}

  {{ govukRadios({
    name: "positiveProgress",
    classes: "govuk-radios--inline",
    errorMessage: {
      text: "Please select yes or no"
    } if (errors | findError('positiveProgress')),
    items: [
      {
        value: "Yes",
        text: "Yes",
        checked: data.recat.fasttrackPositiveProgress.positiveProgress === 'Yes',
        conditional: {
          html:detailTextHtml
        }
      },
      {
        value: "No",
        checked: data.recat.fasttrackPositiveProgress.positiveProgress === 'No',
        text: "No"
      }
    ]
  }) }}


{% endblock %}
