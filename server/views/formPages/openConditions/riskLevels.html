{% extends "../formTemplate.html" %}
{% from "character-count/macro.njk" import govukCharacterCount %}
{% from "radios/macro.njk" import govukRadios %}
{% from "details/macro.njk" import govukDetails %}

{% set greenButtonText = "Continue" %}
{% set pageTitle = "Risk levels" %}

{% block navigation %}

  {% if catType == 'RECAT' %}
    {% include "../../partials/breadCrumbTaskListRecat.html" %}
  {% else %}
    {% include "../../partials/breadCrumbTaskList.html" %}
  {% endif %}

{% endblock %}

{% set likelyToAbscondHtml %}

  {{ govukCharacterCount({
    name: "likelyToAbscondText",
    type: "likelyToAbscondText",
    maxlength: 50000,
    threshold: 50,
    label: {
      text: "Give details of this information"
    },
    value: data.openConditions.riskLevels.likelyToAbscondText,
    errorMessage: {
      text: "Please enter details"
    } if (errors | findError('likelyToAbscondText'))
  }) }}

{% endset %}

{% block formItems %}

<h1 class="govuk-heading-l">{{ pageTitle }}</h1>

  {{ govukRadios({
    name: "likelyToAbscond",
    classes: "govuk-radios--inline",
    fieldset: {
      legend: {
        text: "Is there any information suggesting they are likely to abscond or take advantage of lower security?"
      }
    },
    hint: {
      text: "Do they have a significant confiscation order or face other ongoing proceedings?"
    },
    errorMessage: {
      text: "Please select yes or no"
    } if (errors | findError('likelyToAbscond')),
    items: [
      {
        value: "Yes",
        text: "Yes",
        checked: data.openConditions.riskLevels.likelyToAbscond === 'Yes',
        conditional: {
          html: likelyToAbscondHtml
        }
      },
      {
        value: "No",
        checked: data.openConditions.riskLevels.likelyToAbscond === 'No',
        text: "No"
      }
    ]
  }) }}

{% set guidanceLikelyToAbscond %}
<div class="govuk-!-font-weight-bold">You should check:</div>
<ul class="govuk-list govuk-list--bullet">
  <li>any confiscation, serious crime prevention and/or restraining orders that are in force</li>
  <li>any ongoing proceedings</li>
  <li>escape history</li>
  <li>responses to court orders or requirements</li>
</ul>
<div class="govuk-!-font-weight-bold govuk-!-padding-top-1">You are looking for:</div>
<ul class="govuk-list govuk-list--bullet">
  <li>if they owe money</li>
  <li>if they have time to serve in lieu</li>
  <li>if they have escaped or absconded in the past</li>
</ul>
{% endset %}

  {{ govukDetails({
    summaryText: "What information should I consider?",
    html: guidanceLikelyToAbscond
  }) }}

{% endblock %}
