{% extends "../../formPages/formTemplate.html" %}

{% from "warning-text/macro.njk" import govukWarningText %}
{% from "radios/macro.njk" import govukRadios %}
{% from "character-count/macro.njk" import govukCharacterCount %}
{% from "button/macro.njk" import govukButton %}
{% from "details/macro.njk" import govukDetails %}

{% set cat = data.openConditionsSuggestedCat %}
{% set suggestedCat = data.categoriser.provisionalCategory.suggestedCategory if data.categoriser.provisionalCategory.suggestedCategory else data.openConditionsSuggestedCat%}
{% set overriddenCat = data.categoriser.provisionalCategory.overriddenCategory if data.categoriser.provisionalCategory.overriddenCategory else data.openConditionsSuggestedCat%}
{% set greenButtonText = "Submit" %}

{% block formItems %}

<h1 class="govuk-heading-l">Provisional category</h1>

<div class="govuk-warning-text forms-info-text warning-overrides">
  <span class="govuk-warning-text__icon" aria-hidden="true">{{ cat }}</span>
  <strong class="govuk-warning-text__text">
    <span class="govuk-warning-text__assistive">Warning</span>
    Based on the information provided, the provisional category is {{ cat }}
  </strong>
</div>

<input type="hidden" name="suggestedCategory" value="{{ suggestedCat }}" />
<input type="hidden" name="categoryAppropriate" value="{{ categoryAppropriate }}" />
<input type="hidden" name="overriddenCategoryText" value="{{ data.categoriser.provisionalCategory.overriddenCategoryText }}"/>
<input type="hidden" name="overriddenCategory" value="{{ overriddenCat }}"/>
<input type="hidden" name="otherInformationText" value="{{ data.categoriser.provisionalCategory.otherInformationText }}"/>
<input type="hidden" name="openConditionsSuggestedCategory" value="{{ cat }}"/>

{{ govukRadios({
  name: "openConditionsCategoryAppropriate",
  classes: "govuk-radios--inline",
  fieldset: {
    legend: {
    text: "Do you think the category is appropriate?",
    isPageHeading: false
    }
  },
  errorMessage: {
    text: "Please select yes or no"
  } if (errors | findError('openConditionsCategoryAppropriate')),
  items: [
    {
      value: "Yes",
      text: "Yes"
    },
    {
      value: "No",
      text: "No"
    }
  ]
}) }}

  {% set guidance %}<div class="govuk-!-font-weight-bold">What to consider:</div>
    <div>The provisional category is based on the information we provide to you and your answers to the yes or no questions. It does not take into account any information you entered in the text boxes.</div>
    <div>You should decide if this is the most appropriate category based on all the information you have available.</div>
  {% endset %}

  {{ govukDetails({
    summaryText: "How do I answer this question?",
    html: guidance
  }) }}


{% endblock %}
