{% extends "../partials/layout.html" %}

{% from "button/macro.njk" import govukButton %}
{% from "input/macro.njk" import govukInput %}
{% from "../macros/breadCrumb.html" import breadCrumb %}
{% set pageTitle = "Dashboard - Categorisation reviews" %}

{% block beforeContent %}

{% include "../partials/breadCrumb.html" %}

{% endblock %}

{% block content %}
{% set maleCatCodes = [ { name: 'B', value: 0 }, { name: 'C', value: 1 },{ name: 'D', value: 2}
   ,{ name: 'YOI closed', value: 3 },{ name: 'YOI open', value: 4 }] %}
{% set femaleCatCodes = [ { name: 'Female open', value: 5 }, { name: 'Female closed', value: 6 } ] %}
<div >
  <h1 class="govuk-heading-l">{{ pageTitle }}</h1>
</div>

<div>
  {% include "../partials/dashboardForm.html" %}
  <hr/>
  <h3>Categorisation review numbers</h3>
  <table class="govuk-table" id="reviewNumbersTable">
    <thead class="govuk-table__head">
    <tr class="govuk-table__row">

      {# -- dynamic stuff start ---#}
      <th class="govuk-table__header" scope="col">From/To</th>
      {%if not isFemale %}
        {% for item in maleCatCodes %}
          <th class="govuk-table__cell table-fixed-width govuk-!-font-weight-bold" scope="col">{{ item.name}}</th>
        {% endfor %}

        <th class="govuk-table__cell table-fixed-width govuk-!-font-weight-bold" scope="col">Total</th>
        </tr>
        </thead>
       <tbody class="govuk-table__body">
          {% for item in maleCatCodes %}
            <tr class="govuk-table__row">
              <td class="govuk-table__cell govuk-!-font-weight-bold">{{ item.name}}</td>
              {% for i in range(0, maleCatCodes.length) %}
                {% if item.value == i %}
                  <td class="govuk-table__cell table-diagonal-cell">{{ table[item.value][i]}}</td>
                {% else %}
                  <td class="govuk-table__cell">{{ table[item.value][i]}} </td>
                {% endif %}
                {% if i == (maleCatCodes.length - 1) %}
                  <td class="govuk-table__cell">{{ table[item.value][7]}}</td>
                {% endif %}
              {% endfor %}
          </tr> {# -- end govuk-table__row ---#}
        {% endfor %}
    <td class="govuk-table__cell govuk-!-font-weight-bold">Total</td>
    {% for item in maleCatCodes %}
      <td class="govuk-table__cell">{{ table[item.value][7]}}</td>
    {% endfor %}
      <td class="govuk-table__cell">{{ table[7][7]}}</td>
    {% endif %}
    </tr>
    {# -- dynamic stuff end ---#}
    </tbody>
  </table>
  <div class="govuk-!-width-two-thirds">
    <h3>Overrides</h3>
    <table class="govuk-table" id="recatTable">
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="col">Selected by categoriser</th>
          <th class="govuk-table__header" scope="col">Supervisor override</th>
          <th class="govuk-table__header" scope="col">numbers</th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        {% for row in recat %}
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">{{ catDisplay(row.recat) }}</td>
            <td class="govuk-table__cell">{{ catDisplay(row.superOverride) }}</td>
            <td class="govuk-table__cell">{{ row.count }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    {% if (not errors | length) %}
      {% include "../partials/dashboardData.html" %}
    {% endif %}
  </div>
</div>
{% endblock %}
